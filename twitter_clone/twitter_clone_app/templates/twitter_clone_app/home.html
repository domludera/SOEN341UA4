{% extends "twitter_clone_app/template.html" %}
{% load static %}
{% load static %}

{% block content %}


    <!-- Html for the page -->

    <div id="app">
        <b-navbar toggleable="md" type="dark" variant="info">

            <b-navbar-toggle target="nav_collapse"></b-navbar-toggle>

            <b-navbar-brand href="#">
                <img src="{% static 'twitter_clone_app/images/chirp.svg' %}" alt="BV"/>
                Chirp.
            </b-navbar-brand>


            <b-collapse is-nav id="nav_collapse">
                <!-- Right aligned nav items -->
                <b-navbar-nav class="ml-auto">

                    <b-navbar-nav>
                        <b-nav-item href="#">Trending</b-nav-item>
                        <b-nav-item href="#" disabled>New</b-nav-item>
                    </b-navbar-nav>

                    <b-nav-form>
                        <b-form-input size="sm" class="mr-sm-2" type="text" placeholder="Search"/>
                        <b-button size="sm" class="my-2 my-sm-0" type="submit">Search</b-button>
                    </b-nav-form>

                    <b-nav-item-dropdown right>
                        <!-- Using button-content slot -->
                        <template slot="button-content">
                            <em></em>
                        </template>
                        <b-dropdown-item href="#">Profile</b-dropdown-item>
                        <b-dropdown-item href="#">Settings</b-dropdown-item>
                        <b-dropdown-divider></b-dropdown-divider>
                        <b-dropdown-item class="logoutBtn" to='' v-on:click.native='' replace>Logout</b-dropdown-item>
                    </b-nav-item-dropdown>
                </b-navbar-nav>

            </b-collapse>
        </b-navbar>
        <b-container>
            <b-row style="text-align: center">


                <b-col class="mainColumns column1">
                    <div class="jumbotron">
                        <h1>Trending</h1>
                        <p id="trendingChirps"></p>
                    </div>
                </b-col>


                <b-col class="mainColumns column2" sm="6">
                    {% if messages %}
                        {% for foo in messages %}
                            <div>
                                {{ foo }}
                            </div>
                        {% endfor %}
                    {% endif %}
                    <div class="jumbotron">
                        <form method="post">
                            {% csrf_token %}
                            {{ form }}
                            <button type="submit" name="post" value="post">Post!</button>
                        </form>
                    </div>


                    <!-- Iterate threw post in database -->
                    {% for chirp in chirpList reversed %}
                        <div id="feedChirp">
                            <p>{{ chirp.author }}<br>
                                {{ chirp.tweet_text }}<br><br>

                            Number of like :  {{ chirp.likes.all.count }}

                            <form method="post">
                            {% csrf_token %}
                            <button type="submit" name="chirp" value="{{ chirp.id }}" class="btn-primary">Like</button>

                            </form>

                            </br>
                            {{ chirp.date_posted }}
                            </p>
                        </div>
                    {% endfor %}

                    <!-- end of iteration -->

                </b-col>


                <b-col class="mainColumns column3">
                    <div class="jumbotron">
                        <div class="profilePic">profilePic</div>
                        <div class="profileStats">profileStats</div>

                    </div>
                </b-col>
            </b-row>
        </b-container>
    </div>

    <!-- End of html -->

    <!-- Vue.js for home -->

    <script>
        new Vue({
            delimiters: ['[[', ']]'],
            el: '#app',
            methods: {
                likeButton: function () {
                    if (this.like === true) {
                        this.like = false;
                        this.counterLike--;
                    } else if (this.like === false) {
                        this.like = true;
                        this.counterLike++;
                    }
                },
                retweetButton: function () {
                    if (this.retweet === true) {
                        this.retweet = false;
                        this.counterRetweet--;
                    } else if (this.retweet === false) {
                        this.retweet = true;
                        this.counterRetweet++;
                    }
                }
            },
            data: {
                like: false,
                retweet: false,
                counterRetweet: 50,
                counterLike: 78
            },
        })
    </script>

    <!-- End of View.js -->

{% endblock content %}